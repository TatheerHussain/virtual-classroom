<head>
    <meta charset="utf-8">
    <title>Networked-Aframe Example — naf-uws-adapter</title>
    <meta name="description" content="Dev Example — naf-uws-adapter">
    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
    <script src="../../../naf.js"></script>
    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>
</head>
<template name="Stream">
<<<<<<< HEAD
	<div class="stream">
		{{#with lecture}}
			{{#if groupMode lecture.mode}}
				<audio id='voiceChat' autoplay="autoplay"></audio>
				{{#if group}}
					<a-scene>
						{{#with group}}
							<!-- blackboard -->
							<a-text position="0 5 -8" value={{getDisplayQuestion}} width="18" align="center" color="white" opacity="0.8" wrap-count="25"></a-text>
							<a-plane position="0 5 -8" height="10" width="20" rotation="0 0 0" color="#604020"></a-plane>
							<a-plane position="0 5 -8" height="9.5" width="19.5" rotation="0 0 0" color="black"></a-plane>
							<!-- desk -->
							<a-text position="0 0.6 -0.4" value={{discussion}} rotation="-90 0 0" width="1.4" align="center" color="black" wrap-count="30"></a-text>
							<a-plane position="0 0.6 -0.4" rotation="-90 0 0" width="1.5" height="2" color="white"></a-plane>
							<a-cylinder position="0 -0.2 -0.6" rotation="0 0 0" radius="1.5" height="1.5" color="#5c5c5c"></a-cylinder>
							<a-plane position="0 -1.5 0" rotation="-90 0 0" width="50" height="50" color="#7BC8A4"></a-plane>	
							<!-- user avatars -->
							{{#each member in getGroupMembers}}
								<a-image position={{avatarPosition @index}} src={{getUserAvatar member}} width="0.8" height="0.8"></a-image>
								<a-text position={{namePosition @index}} value={{getUserNameById member}} align="center" color="#000" opacity="0.8" wrap-count="55"></a-text>
							{{/each}}

							<!-- discussion panel -->
<!-- 							{{#each discussion in groupDiscussion}}
								<a-plane position="-1.5 1.5 1" rotation="0 90 0" width="2" height="1" color="black"></a-plane>
								<a-text position="-1.5 1.5 1" value={{getUserNameById discussion.userId}} align="center" color="#000" opacity="0.8" wrap-count="55"></a-text>
							{{/each}} -->
						{{/with}}
						<a-sky color="#ECECEC"></a-sky>
						<a-entity position="0 1.5 1">
							<a-entity camera look-controls wasd-controls></a-entity>
						</a-entity>
					</a-scene>
				{{else}}
					{{#if userIsCourseInstructor lecture.courseCode}}
						<ul class="group-selector collection with-header card innerMain">
							<li class="collection-header">
								<p>Select group</p>
							</li>
							{{#each groups}}
								<div class="collection-item flex-container flex-container-mobile">
									<div class="left-item">Group {{name}}&nbsp;Leader {{getUserNameById leader}}</div>
									<div class="right-item"><button data-value={{_id}} class="enter-group-discussion waves-effect waves-teal btn-flat">ENTER</button></div>
								</div>
							{{/each}}
						</ul>
					{{else}}
						<div class="valign-wrapper" style="height:100vh"><h3 style="margin:0 auto;">You're not currently in any group.</h3></div>
					{{/if}}
				{{/if}}
			{{else}}
				{{#if lecture.youtube}}
					<div class="video-container" style="width:100%;height:100vh">
						<iframe src={{getLectureYouTubeURL2 lecture._id}} frameborder="0" 
							allow="autoplay; encrypted-media" allowfullscreen></iframe>
						<!-- <iframe width="560" height="315" src="https://www.youtube.com/embed/E8eT8R2Cy8I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe> -->
						<!-- <video width="320" height="240" controls autoplay allowfullscreen>
						  <source src="http://_ip_addr_of_your_web_server/stream.m3u8" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'/>
						  <source src="http://localhost:8181/stream.ogg" type="video/ogg">
						  Your browser does not support the video tag.
						</video> -->			

					</div>
				{{else}}
					<div class="valign-wrapper" style="height:100vh"><h3 style="margin:0 auto;">YouTube stream not available.</h3></div>
				{{/if}}
			{{/if}}

			{{#if groupMode lecture.mode}}
				{{#if userIsCourseInstructor lecture.courseCode}}
					{{#if group}}
						<button id="exit-group-discussion" class="waves-light btn-flat overlay-btn">EXIT</button>
					{{/if}}
				{{else}}
					<button data-target="group-discussion-modal" id="group-discussion-modal-trigger" class="modal-trigger waves-light btn-flat overlay-btn"><img src="/icons/memo.svg"></button>
				{{/if}}
			{{else}}
				<button data-target="recorder-modal" id="recorder-modal-trigger" class="modal-trigger waves-light btn-flat overlay-btn"><img src="/icons/stop.svg"></button>
			{{/if}}
			{{#with group}}
			<div id="group-discussion-modal" class="modal">
				<form class="group-discussion-form">
					<div class="modal-content">
						<h3>Group {{number}}</h3>
						<div class="input-field">
							<textarea id="group-discussion-textarea" class="materialize-textarea" value={{discussion}} {{userCanEditDiscussion}}></textarea>
							<label for="group-discussion-textarea" class={{activeTextarea discussion}}>Discussion</label>
						</div>
					</div>
					<div class="modal-footer">
						<button class="waves-effect waves-teal modal-action btn-flat" type="button" id="group-discussion-modal-close">Close</button>
					</div>
				</form>
			</div>
			{{/with}}
			<div id="recorder-modal" class="modal">
				<div class="modal-content">
					{{> Recorder}}
				</div>
			</div>
		{{/with}}
	</div>
</template>
=======
    <body>
    <a-scene networked-scene="
      app: myApp;
      room: {{getGroupId}};
      adapter: uws;
      debug: true;
      audio: true;
      serverURL: ws://uws-adapter.herokuapp.com;
    " vr-mode-ui="enabled: true">
        <a-assets>
            <img id="slide" src="https://cdn.glitch.com/3ac31fd5-b9c6-4c63-b076-a7d4b243896d%2Fslide.png?1530110254475">
            <img id="clouds"
                 src="https://cdn.glitch.com/3ac31fd5-b9c6-4c63-b076-a7d4b243896d%2Fclouds.jpg?1530201686662">
        </a-assets>
        <a-assets>
        </a-assets>
        <a-plane id="ground"
                 class="collidable"
                 width="10"
                 height="10"
                 color="green"
                 rotation="-90 0 0"
                 teleport2>
        </a-plane>

        <a-cylinder id="pedestal"
                    height="1"
                    radius="0.3"
                    position="0 0.5 -3">
        </a-cylinder>

        <a-sphere id="button"
                  position="0 1 -3"
                  radius="0.2"
                  color="#ef2b45"
                  class="collidable"
                  change-color-on-hover="color: #961021"
                  event-set__enter="_event: mouseenter; _target: #buttonText; visible: true"
                  event-set__leave="_event: mouseleave; _target: #buttonText; visible: false"
                  button_down="text: help">
            <a-text id="buttonText"
                    value="Press For Help"
                    align="center"
                    visible="false"
                    position="0 -0.5 0.31"
                    geometry="primitive: plane; width: 1.62; height: 0.4"
                    material="color: #848484">
            </a-text>
        </a-sphere>

        <a-image id="board"
                 src="#slide"
                 width="10"
                 height="5"
                 color="#ffffff"
                 rotation="180 0 180"
                 position="0 2.5 7"
                 button_down_board="index: 0; doodle_index: 0; delay: 2"
                 class="collidable">
        </a-image>

        <a-box id="red_box"
               position="6 4 7"
               color="red"
               class="collidable"
               change-drawing-color="color: red">
        </a-box>

        <a-box id="blue_box"
               position="6 2.5 7"
               color="blue"
               class="collidable"
               change-drawing-color="color: blue">
        </a-box>

        <a-box id="green_box"
               position="6 1 7"
               color="green"
               class="collidable"
               change-drawing-color="color: green">
        </a-box>

        <a-box id="eraser_button"
               position="-6 2.5 7"
               color="white"
               class="collidable"
               erase_toggle>
        </a-box>


        <!--
        <a-cylinder id="teleporter0"
          position="3 0 3"
          height="0.1"
          radius="0.5"
          color="red"
          change-color-on-hover="color: #961021"
          class="collidable"
          teleport>
        </a-cylinder>

        <a-cylinder id="teleporter1"
          position="-3 0 3"
          height="0.1"
          radius="0.5"
          color="red"
          change-color-on-hover="color: #961021"
          class="collidable"
          teleport>
        </a-cylinder>

        <a-cylinder id="teleporter2"
          position="0 0 -1"
          height="0.1"
          radius="0.5"
          color="red"
          change-color-on-hover="color: #961021"
          class="collidable"
          teleport>
        </a-cylinder>

        <a-box id="test"></a-box>
        -->

        <a-torus id="target" visible="false" rotation="90 0 0" radius="0.2" radius-tubular="0.01"></a-torus>


        <a-sky id="skybox" src="#clouds"></a-sky>

        <a-entity id="player" spawn-in-circle="radius:3;"
                  networked="template:#avatar-template;attachTemplateToLocal:false;" camera position="0 1.3 0"
                  look-controls>
            <a-cursor id="cursor"
                      raycaster="objects: .collidable">

                <a-image id="crosshair"
                         src="https://cdn.glitch.com/3ac31fd5-b9c6-4c63-b076-a7d4b243896d%2Fadd_plus-512.png?1530123029481"
                         position="0 0 -1"
                         width="0.1"
                         height="0.1"
                         visible="false">
                </a-image>

                <a-image id="circle"
                         src="https://cdn.glitch.com/3ac31fd5-b9c6-4c63-b076-a7d4b243896d%2Fcircle-512.png?1530124205149"
                         position="0 0 -1"
                         width="0.1"
                         height="0.1"
                         visible="true">
                </a-image>

                <a-image id="pen"
                         src="https://cdn.glitch.com/3ac31fd5-b9c6-4c63-b076-a7d4b243896d%2Fpen-15.png?1530123029217"
                         position="0.1 0.1 -1"
                         width="0.1"
                         height="0.1"
                         visible="false">
                </a-image>

                <a-image id="paint"
                         src="https://cdn.glitch.com/3ac31fd5-b9c6-4c63-b076-a7d4b243896d%2Fpaint-icon-72090.png?1530126049197"
                         position="0.1 0.1 -1"
                         width="0.1"
                         height="0.1"
                         visible="false"
                         material="color: black">
                </a-image>

                <a-image id="eraser"
                         src="https://cdn.glitch.com/3ac31fd5-b9c6-4c63-b076-a7d4b243896d%2Feraser-512.png?1530199743157"
                         position="0.1 0.1 -1"
                         width="0.1"
                         height="0.1"
                         visible="false">
                </a-image>

                <a-image id="steps"
                         src="https://cdn.glitch.com/3ac31fd5-b9c6-4c63-b076-a7d4b243896d%2Fbasic3-120_shoes_foot_step_footsteps-512.png?1530200010638"
                         position="0.1 0.1 -1"
                         width="0.1"
                         height="0.1"
                         visible="false">
                </a-image>
            </a-cursor>

            <a-text id="UI"
                    value="Help Requested"
                    align="center"
                    position="0 1 -2"
                    color="red"
                    visible="false">
            </a-text>
        </a-entity>
    </a-scene>
    <script>
        // Define custom schema for syncing avatar components
        NAF.schemas.add({
            template: '#doodle-template',
            components: [
                'position',
                'rotation',
                'line'
            ]
        });
    </script>
    </body>
</template>
>>>>>>> fece4ece8cc46cfcd0af447cc8bc72d9a9bcc193
